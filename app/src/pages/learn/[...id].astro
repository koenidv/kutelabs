---
import { getEntry } from "astro:content"
import type { Challenge } from "../../schema/challenge"
import ElevatedBox from "../../components/ElevatedBox.astro"
import { EditorMixed } from "@kutelabs/editor-mixed"



const { id } = Astro.params
if (id === undefined) {
  return Astro.redirect("/404")
}

const item = await getEntry("challenges", id)
if (item === undefined) {
  return Astro.redirect("/404")
}
const challenge = item.data as Challenge

// todo editor is not really size-adjustable
---

<div class="flex w-full min-h-screen flex-col items-center justify-center gap-8 py-12">
  <h1>{challenge.story.title}</h1>
  <ElevatedBox elevation={2}>
    <!-- @ts-ignore -->
    <EditorMixed client:load data={challenge.editor} useDefaultConfig />
  </ElevatedBox>
</div>